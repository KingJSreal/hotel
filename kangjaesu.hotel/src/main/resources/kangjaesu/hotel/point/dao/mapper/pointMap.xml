<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kangjaesu.hotel.user.dao.mapper.UserMapper">
	<resultMap type="point" id="pointMap">
		<result property="pointDate" column="point_date"/>
		<result property="pointContents" column="point_content"/>
		<association property="userNum" column="user_num" ></association>
	</resultMap>

	<resultMap type="user" id="userMap">
		<id property="userNum" column="user_num"/>
		<result property="userEmail" column="user_email"/>
		<result property="userPassword" column="user_pwd"/>
		<result property="userName" column="user_korname"/>
		<result property="userEngFirstName" column="user_firstname"/>
		<result property="userEngLastName" column="user_lastname"/>
		<result property="userBirth" column="user_birth"/>
		<result property="userPhone" column="user_phone"/>
		<result property="userTel" column="tel"/>
		<result property="userZip" column="zip"/>
		<result property="userAdd" column="address"/>
		<result property="userAddDetail" column="add_detail"/>
		<result property="userRegDate" column="user_reg_date"/>
		<result property="userGrade" column="grade"/>
	</resultMap>
	
	<select id="loginUser" parameterType="user" resultMap="userMap">
		select *
		from users
		<where>
			<if test="userEmail != null">
				user_email=#{userEmail}
			</if>
			<if test="userPassword != null">
				and user_pwd=#{userPassword}
			</if>
		</where>
	</select>
	
	<select id="findId" parameterType="user" resultMap="userMap">
		select user_email
		from users
		where
			user_korname = #{userName}
			and user_firstname = #{userEngFirstName}
			and user_lastname = #{userEngLastName}
			and user_birth = #{userBirth}
	</select>
	
	<select id="findPw" parameterType="user" resultMap="userMap">
		select user_pwd
		from users
		where
			user_korname = #{userName}
			and user_firstname = #{userEngFirstName}
			and user_lastname = #{userEngLastName}
			and user_birth = #{userBirth}
			and user_email = #{userEmail}
			and user_phone = #{userPhone}
	</select>
</mapper>